(()=>{"use strict";var t={708:(t,e,n)=>{n.d(e,{jR:()=>s});var i=function(t){return function(t){return"string"==typeof t||t instanceof String}(t)?t.trim():""},s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map((function(t){return i(t)})).filter(Boolean)}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,e=function(t){return"string"==typeof t||t instanceof String},i=function(t){return e(t)?t.trim():""};const s={trim:i,isNan:function(t){return"number"==typeof t&&isNaN(t)},isNil:function(t){return null==t},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},size:function(t){return t&&Array.isArray(t)&&t.length?t.length:0},isString:e,splitSentences:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map((function(t){return i(t)})).filter(Boolean)},validateLocale:function(e){return"string"==typeof e&&t.test(e)}};var o={};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}var e,n,i;return e=t,n=[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,i){t.browserSupport||i("Your browser does not support Speech Synthesis");var o=(0,s.isNil)(e.listeners)?{}:e.listeners,a=!!(0,s.isNil)(e.splitSentences)||e.splitSentences,r=(0,s.isNil)(e.lang)?void 0:e.lang,l=(0,s.isNil)(e.volume)?1:e.volume,u=(0,s.isNil)(e.rate)?1:e.rate,c=(0,s.isNil)(e.pitch)?1:e.pitch,h=(0,s.isNil)(e.voice)?void 0:e.voice;Object.keys(o).forEach((function(t){var e=o[t];"onvoiceschanged"!==t&&(speechSynthesis[t]=function(t){e&&e(t)})})),t._loadVoices().then((function(e){o.onvoiceschanged&&o.onvoiceschanged(e),!(0,s.isNil)(r)&&t.setLanguage(r),!(0,s.isNil)(h)&&t.setVoice(h),!(0,s.isNil)(l)&&t.setVolume(l),!(0,s.isNil)(u)&&t.setRate(u),!(0,s.isNil)(c)&&t.setPitch(c),!(0,s.isNil)(a)&&t.setSplitSentences(a),n({voices:e,lang:t.lang,voice:t.voice,volume:t.volume,rate:t.rate,pitch:t.pitch,splitSentences:t.splitSentences,browserSupport:t.browserSupport})})).catch((function(t){i(t)}))}))}},{key:"_fetchVoices",value:function(){return new Promise((function(t,e){setTimeout((function(){var n=speechSynthesis.getVoices();return(0,s.size)(n)>0?t(n):e("Could not fetch voices")}),100)}))}},{key:"_loadVoices",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._fetchVoices().catch((function(n){if(0===e)throw n;return t._loadVoices(e-1)}))}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(t){var e,n=speechSynthesis.getVoices();if((0,s.isString)(t)&&(e=n.find((function(e){return e.name===t}))),(0,s.isObject)(t)&&(e=t),!e)throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet.";this.synthesisVoice=e}},{key:"setLanguage",value:function(t){if(t=t.replace("_","-"),!(0,s.validateLocale)(t))throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)";this.lang=t}},{key:"setVolume",value:function(t){if(t=parseFloat(t),!(!(0,s.isNan)(t)&&t>=0&&t<=1))throw"Error setting volume. Please verify your volume value is a number between 0 and 1.";this.volume=t}},{key:"setRate",value:function(t){if(t=parseFloat(t),!(!(0,s.isNan)(t)&&t>=0&&t<=10))throw"Error setting rate. Please verify your volume value is a number between 0 and 10.";this.rate=t}},{key:"setPitch",value:function(t){if(t=parseFloat(t),!(!(0,s.isNan)(t)&&t>=0&&t<=2))throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2.";this.pitch=t}},{key:"setSplitSentences",value:function(t){this.splitSentences=t}},{key:"speak",value:function(t){var e=this;return new Promise((function(n,i){var o=t.text,a=t.listeners,r=void 0===a?{}:a,l=t.queue,u=void 0===l||l,c=(0,s.trim)(o);(0,s.isNil)(c)&&n(),!u&&e.cancel();var h=[],p=e.splitSentences?(0,s.splitSentences)(c):[c];p.forEach((function(t,o){var a=o===(0,s.size)(p)-1,l=new SpeechSynthesisUtterance;e.synthesisVoice&&(l.voice=e.synthesisVoice),e.lang&&(l.lang=e.lang),e.volume&&(l.volume=e.volume),e.rate&&(l.rate=e.rate),e.pitch&&(l.pitch=e.pitch),l.text=t,Object.keys(r).forEach((function(t){var e=r[t];l[t]=function(s){e&&e(s),"onerror"===t&&i({utterances:h,lastUtterance:l,error:s}),"onend"===t&&a&&n({utterances:h,lastUtterance:l})}})),h.push(l),speechSynthesis.speak(l)}))}))}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}],n&&a(e.prototype,n),i&&a(e,i),t}();const l=r;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,p(i.key),i)}}function h(t,e){v(t,e),e.add(t)}function p(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:String(e)}function d(t,e,n){v(t,e),e.set(t,n)}function v(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function y(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,m(t,e,"set"),n),n}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var b=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,_=new WeakMap,k=new WeakMap,x=new WeakMap,B=new WeakSet,A=new WeakSet,j=new WeakSet,O=function(){function t(e,n,i,s){var o,a,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,j),h(this,A),h(this,B),d(this,b,{writable:!0,value:""}),d(this,w,{writable:!0,value:{}}),o=this,r=[],(a=p(a="voices"))in o?Object.defineProperty(o,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[a]=r,d(this,S,{writable:!0,value:""}),d(this,T,{writable:!0,value:""}),d(this,_,{writable:!0,value:""}),d(this,k,{writable:!0,value:""}),d(this,x,{writable:!0,value:[]}),y(this,w,e),this.voices=n,y(this,_,i),y(this,k,s),g(this,B,L).call(this),this.defineVoiceAndLang(s,i)}var e,n,i;return e=t,n=[{key:"isAndroid",value:function(){var t=navigator.userAgent.toLowerCase().indexOf("android")>-1;return!!t}},{key:"getBrowser",value:function(){return f(this,b)}},{key:"getLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(this,S),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(this,T);return f(this,T)===e||this.defineVoiceAndLang(t,e),f(this,T)}},{key:"getVoice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(this,S),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f(this,T);return f(this,S)===t||this.defineVoiceAndLang(t,e),f(this,S)}},{key:"setLanguage",value:function(t,e){var n=this,i=!1;return this.voices.length?(Object.values(this.voices).map((function(e){var s=new RegExp(t,"gi");null!==e.lang.match(s)&&e.name&&(y(n,T,e.lang),i=!0)})),{lang:f(this,T),isSupported:i}):{lang:f(this,T),isSupported:i}}},{key:"setVoice",value:function(t){y(this,S,t)}},{key:"getVoiceByLangCode",value:function(t){for(var e=0;e<this.voices.length;e++){var n=this.voices[e];if(n.lang===t)return n.name}return!1}},{key:"defineVoiceAndLang",value:function(t,e){var n,i="",s=t||f(this,k),o=e||f(this,_),a=g(this,A,E).call(this,o),r=g(this,j,C).call(this,a);if(r.length>1)for(var l=0;l<r.length;l++){if(i=r[l].lang,n=r[l].name,s===r[l].name){y(this,S,n),y(this,T,i);break}y(this,S,n),y(this,T,i)}else 1===r.length?(y(this,S,r[0].name),y(this,T,r[0].lang)):(y(this,S,t),y(this,T,e))}},{key:"getVoices",value:function(){return this.voices}},{key:"validateCountryCode",value:function(t){for(var e=this.voices,n=0;n<e.length;n++){var i=e[n].lang;if((i=g(this,A,E).call(this,i))==t||this.aliasCountryCode(t))return!0}return!1}},{key:"aliasCountryCode",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={es:["es","ca"]};for(var i in n)if(n[i].includes(t))return!!e||i;return!e&&t}}],n&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(){var t=this,e=f(this,w).browser;Object.keys(e).map((function(n){e[n]&&y(t,b,n.replace("is_",""))}))}function E(t){return t&&null!=t.indexOf("-")?t.split("-")[0]:t&&null!=t.indexOf("_")?t.split("_")[0]:t}function C(t){var e=this;return y(this,x,[]),Object.values(this.voices).map((function(n){var i=new RegExp(t,"gi");null!==n.lang.match(i)&&n.name&&f(e,x).push(n)})),f(this,x)}window.BrowserSupport=O;var P,z=n(708);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,R(i.key),i)}}function V(t,e,n){return(e=R(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=N(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N(e)?e:String(e)}var I=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.TTS;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,"TTS",window.TTS),V(this,"browser",null),V(this,"speech",null),V(this,"speechSynthesis",window.speechSynthesis),V(this,"utterence",new SpeechSynthesisUtterance),V(this,"speechRecognitionIsActive",!0),V(this,"speechRecognition",window.speechRecognition||window.webkitSpeechRecognition),V(this,"recordStatus","record"),V(this,"listenStatus","listen"),V(this,"noticeClass","tta_notice"),V(this,"cofiguration",{}),V(this,"timer",null),V(this,"buttonId",null),V(this,"speakButton",null),V(this,"content",null),V(this,"ttsListeningSettings",null),V(this,"languages",[]),V(this,"voices",{}),V(this,"voice","Google UK English Female"),V(this,"language","en-US"),V(this,"buttonTextArr",null),V(this,"splittedSentances",""),V(this,"isCanceled",!1),V(this,"shouldCancelTimer",null),V(this,"callBackAfterEnd",null),V(this,"splitSentences",null),V(this,"playButtonNo",1),this.TTS=o,this.content=i||window.TTS.contents[e],this.splittedSentances=(0,z.jR)(i),this.buttonId=e,this.buttonTextArr=this.TTS.settings.textArr,this.speakButton=s||document.getElementById(e),this.ttsListeningSettings=this.TTS.settings.listening,this.ttsListeningSettings=this.TTS.settings.listening,this.speech=new l,this.splitSentences=z.jR,this.playButtonNo=null==this||null===(n=this.TTS)||void 0===n||null===(n=n.settings)||void 0===n||null===(n=n.settings)||void 0===n||null===(n=n.customize)||void 0===n||null===(n=n.buttonSettings)||void 0===n?void 0:n.id}var e,n,i;return e=t,n=[{key:"getData",value:function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(window.TextToSpeech=this),this}},{key:"playButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.listen_text)&&void 0!==t?t:"Listen"}},{key:"playButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-play"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.play){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.play,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.playButtonText()+"</span></span></div>"}},{key:"replayButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.replay_text)&&void 0!==t?t:"Replay"}},{key:"replayButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-image-rotate"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.replay){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.replay,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.replayButtonText()+"<span></span></span></div>"}},{key:"pauseButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.pause_text)&&void 0!==t?t:"Pause"}},{key:"pauseButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-pause"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.pause){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.pause,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.pauseButtonText()+"<span></span></span></div>"}},{key:"resumeButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.resume_text)&&void 0!==t?t:"Resume"}},{key:"resumeButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-play"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.resume){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.resume,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.buttonTextArr.resume_text+"<span></span></span></div>"}},{key:"recordStartButtonContent",value:function(){return'<span class="dashicons dashicons-controls-volumeoff"></span> '+this.buttonTextArr.start_text}},{key:"recordStopButtonConten",value:function(){return'<span class="dashicons dashicons-controls-volumeon"></span> '+this.buttonTextArr.stop_text}},{key:"displayApiMissing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",i="";if(this.speechRecognitionIsActive||(n+="Text To Audio: Please enable speechRecognition"),this.speechSynthesis||(n+=n?" , speechSynthesis.":"Text To Audio: Please enable speechSynthesis."),t){var s,o=null===(s=document.getElementById(t))||void 0===s?void 0:s.previousSibling;o?(n+=' Click here to <a href="https://wordpress.org/plugins/text-to-audio/#how%20to%20enable%20%60%60speechsynthesis%60%60%20on%20firefox%3F" target="_blank">enable</a>',o.style.display="block",o.innerHTML=n,setTimeout((function(){document.querySelector(".tta_notice").style.display="none",o.innerHTML=""}),5e3)):(n+="\nFollow this link to enable: \n".concat(i+="This browser not supports speechSynthesis API"),alert(n))}else e||"?page=text-to-audio"===location.search&&"#/customize"===location.hash?i+=ttsObj.admin_url+"admin.php?page=text-to-audio#/docs":i+="https://wordpress.org/plugins/text-to-audio/#how%20to%20enable%20%60%60speechsynthesis%60%60%20on%20firefox%3F",n+="\nFollow this link to enable: \n".concat(i),alert(n);return!0}},{key:"displayButtonText",value:function(t){var e;1==(null==this?void 0:this.playButtonNo)&&null!=this&&null!==(e=this.speakButton)&&void 0!==e&&e.innerHTML&&("listen"===t?(this.speakButton.innerHTML=this.replayButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.replayButtonText())):"pause"===t?(this.speakButton.innerHTML=this.pauseButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.pauseButtonText())):"resume"===t&&(this.speakButton.innerHTML=this.resumeButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.resumeButtonText())))}},{key:"finishedSpeaking",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.speech.speaking()&&!n||(console.log("End utterance "+this.speech.speaking()),this.listenStatus="listen",this.displayButtonText(this.listenStatus),this.splittedSentances=(0,z.jR)(window.TTS.contents[this.buttonId]),t.cancel()),console.log("Success !",e),this.callBackAfterEnd&&this.callBackAfterEnd(),this.browser.isAndroid()||(clearTimeout(this.timer),this.timer=null,clearTimeout(this.shouldCancelTimer),this.shouldCancelTimer=null),window.sessionStorage.setItem("tts_paused_by_intention",!1)}},{key:"speak",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content;this.speech.hasBrowserSupport()?(t.setLanguage(this.browser.getLanguage()),t.setVoice(this.browser.getVoice()),t.speak({text:n,queue:!1,listeners:{onstart:function(t){console.log("Start utterance"),e.utterence=t,wp.hooks.doAction("tts_high_light_text",t.currentTarget.text,e.buttonId,z.jR)},onend:function(t){console.log("End utterance")},onpause:function(t){console.log("Pause utterance")},onresume:function(t){console.log("Resume utterance")},onboundary:function(t){}}}).then((function(n){e.finishedSpeaking(t,n)})).catch((function(t){console.error("An error occurred :",t)})),this.listenStatus="pause",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||(this.timer=setTimeout((function e(){t.pause(),console.log(t),setTimeout((function(){t.resume()}),0),this.timer=setTimeout(e,1e4),t.speaking()||(clearTimeout(this.timer),this.timer=null)}),1e4))):this.displayApiMissing("tts__listent_content_"+this.buttonId)}},{key:"pause",value:function(t){var e,n=this;this.browser.isAndroid()?(t.cancel(),this.isCanceled=!0):(t.pause(),this.shouldCancelTimer=setInterval((function(){t.cancel(),n.isCanceled=!0}),1));var i=this.splittedSentances.indexOf((null===(e=this.utterence)||void 0===e||null===(e=e.target)||void 0===e?void 0:e.text)||"");this.splittedSentances=this.splittedSentances.slice(i),this.content=this.splittedSentances.join(" "),this.listenStatus="resume",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||clearTimeout(this.timer)}},{key:"resume",value:function(t){this.isCanceled?(this.speak(t,this.content),clearTimeout(this.shouldCancelTimer),this.browser.isAndroid()||clearTimeout(this.timer)):(t.resume(),clearTimeout(this.shouldCancelTimer)),this.listenStatus="pause",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||(this.timer=setTimeout((function e(){t.pause(),console.log(t),setTimeout((function(){t.resume()}),0),this.timer=setTimeout(e,1e4),t.speaking()||(clearTimeout(this.timer),this.timer=null)}),1e4))}},{key:"_init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.callBackAfterEnd=e,void 0!==this.ttsListeningSettings&&this.speech.init({volume:this.ttsListeningSettings.tta__listening_volume?this.ttsListeningSettings.tta__listening_volume:1,rate:this.ttsListeningSettings.tta__listening_rate?this.ttsListeningSettings.tta__listening_rate:1,pitch:this.ttsListeningSettings.tta__listening_pitch?this.ttsListeningSettings.tta__listening_pitch:2,splitSentences:!0,listeners:{onvoiceschanged:function(t){}}}).then((function(e){t.voices=e.voices,t.browser=new O(ttsObj,e.voices,t.ttsListeningSettings.tta__listening_lang,t.ttsListeningSettings.tta__listening_voice),t._prepareSpeakButton(t.speech),window.sessionStorage.setItem("tts_paused_by_intention",!1)})).catch((function(t){console.error("An error occured while initializing : ",t)}))}},{key:"_prepareSpeakButton",value:function(t){var e=this;"listen"==this.listenStatus?this.speak(t):"pause"==this.listenStatus?this.pause(t):"resume"==this.listenStatus&&this.resume(t),document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState&&"pause"===e.listenStatus&&(e.pause(t),e.callBackAfterEnd&&e.callBackAfterEnd()),"visible"===document.visibilityState&&"resume"===e.listenStatus){var n,i,s=JSON.parse(window.sessionStorage.getItem("tts_paused_by_intention")),o=null!==(n=null===(i=window)||void 0===i||null===(i=i.TTS)||void 0===i||null===(i=i.settings)||void 0===i||null===(i=i.settings)||void 0===i||null===(i=i.settings)||void 0===i?void 0:i.tta__settings_stop_auto_playing_after_switching_tab)&&void 0!==n&&n;s||o||(window.sessionStorage.setItem("tts_paused_by_intention",!1),e.resume(t)),e.callBackAfterEnd&&e.callBackAfterEnd()}}))}}],n&&M(e.prototype,n),i&&M(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();if(null!==(P=window)&&void 0!==P&&null!==(P=P.ttsObj)&&void 0!==P&&P.is_pro_active?window.TextToSpeech=I:window.document.addEventListener("DOMContentLoaded",(function(){window.TextToSpeech=I})),"page=text-to-audio"===new URLSearchParams("page=text-to-audio").toString()){var F;F=setInterval((function(){window.hasOwnProperty("ttsObj")&&ttsObj.is_dashboard&&(window.hasOwnProperty("TTS")?""!==window.TTS.contents[0]&&(window.TTS.contents[1]=""):(window.TTS={},window.TTS.contents={},window.TTS.contents[1]=""),window.TTS.hasOwnProperty("settings")||(window.TTS.settings={listening:{tta__listening_lang:"en-US",tta__listening_voice:"Google UK English Female",tta__listening_pitch:"1",tta__listening_rate:"1",tta__listening_volume:"1"},cssClass:"",btnStyle:"background-color:#ee6d6d;color:#ffffff;width:100%;border:0;display:block;border-radius:4px;text-decoration:none;cursor:pointer;",textArr:{listen_text:"Listen",pause_text:"Pause",resume_text:"Resume",replay_text:"Replay",start_text:"Start",stop_text:"Start"},customCSS:"",shouldDisplayIcon:"inline-block"},window.TTS.settings.readingTime=1),clearInterval(F),F=null)}),1e3)}})()})();