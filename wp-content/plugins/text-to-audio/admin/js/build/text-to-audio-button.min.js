(()=>{"use strict";var t={882:(t,e,n)=>{n.d(e,{Z:()=>D});var i=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,s=function(t){return"string"==typeof t||t instanceof String},o=function(t){return s(t)?t.trim():""};const r={trim:o,isNan:function(t){return"number"==typeof t&&isNaN(t)},isNil:function(t){return null==t},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},size:function(t){return t&&Array.isArray(t)&&t.length?t.length:0},isString:s,splitSentences:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map((function(t){return o(t)})).filter(Boolean)},validateLocale:function(t){return"string"==typeof t&&i.test(t)}};var a={};function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}var e,n,i;return e=t,n=[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,i){t.browserSupport||i("Your browser does not support Speech Synthesis");var s=(0,r.isNil)(e.listeners)?{}:e.listeners,o=!!(0,r.isNil)(e.splitSentences)||e.splitSentences,a=(0,r.isNil)(e.lang)?void 0:e.lang,l=(0,r.isNil)(e.volume)?1:e.volume,u=(0,r.isNil)(e.rate)?1:e.rate,c=(0,r.isNil)(e.pitch)?1:e.pitch,h=(0,r.isNil)(e.voice)?void 0:e.voice;Object.keys(s).forEach((function(t){var e=s[t];"onvoiceschanged"!==t&&(speechSynthesis[t]=function(t){e&&e(t)})})),t._loadVoices().then((function(e){s.onvoiceschanged&&s.onvoiceschanged(e),!(0,r.isNil)(a)&&t.setLanguage(a),!(0,r.isNil)(h)&&t.setVoice(h),!(0,r.isNil)(l)&&t.setVolume(l),!(0,r.isNil)(u)&&t.setRate(u),!(0,r.isNil)(c)&&t.setPitch(c),!(0,r.isNil)(o)&&t.setSplitSentences(o),n({voices:e,lang:t.lang,voice:t.voice,volume:t.volume,rate:t.rate,pitch:t.pitch,splitSentences:t.splitSentences,browserSupport:t.browserSupport})})).catch((function(t){i(t)}))}))}},{key:"_fetchVoices",value:function(){return new Promise((function(t,e){setTimeout((function(){var n=speechSynthesis.getVoices();return(0,r.size)(n)>0?t(n):e("Could not fetch voices")}),100)}))}},{key:"_loadVoices",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this._fetchVoices().catch((function(n){if(0===e)throw n;return t._loadVoices(e-1)}))}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(t){var e,n=speechSynthesis.getVoices();if((0,r.isString)(t)&&(e=n.find((function(e){return e.name===t}))),(0,r.isObject)(t)&&(e=t),!e)throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet.";this.synthesisVoice=e}},{key:"setLanguage",value:function(t){if(t=t.replace("_","-"),!(0,r.validateLocale)(t))throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)";this.lang=t}},{key:"setVolume",value:function(t){if(t=parseFloat(t),!(!(0,r.isNan)(t)&&t>=0&&t<=1))throw"Error setting volume. Please verify your volume value is a number between 0 and 1.";this.volume=t}},{key:"setRate",value:function(t){if(t=parseFloat(t),!(!(0,r.isNan)(t)&&t>=0&&t<=10))throw"Error setting rate. Please verify your volume value is a number between 0 and 10.";this.rate=t}},{key:"setPitch",value:function(t){if(t=parseFloat(t),!(!(0,r.isNan)(t)&&t>=0&&t<=2))throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2.";this.pitch=t}},{key:"setSplitSentences",value:function(t){this.splitSentences=t}},{key:"speak",value:function(t){var e=this;return new Promise((function(n,i){var s=t.text,o=t.listeners,a=void 0===o?{}:o,l=t.queue,u=void 0===l||l,c=(0,r.trim)(s);(0,r.isNil)(c)&&n(),!u&&e.cancel();var h=[],p=e.splitSentences?(0,r.splitSentences)(c):[c];p.forEach((function(t,s){var o=s===(0,r.size)(p)-1,l=new SpeechSynthesisUtterance;e.synthesisVoice&&(l.voice=e.synthesisVoice),e.lang&&(l.lang=e.lang),e.volume&&(l.volume=e.volume),e.rate&&(l.rate=e.rate),e.pitch&&(l.pitch=e.pitch),l.text=t,Object.keys(a).forEach((function(t){var e=a[t];l[t]=function(s){e&&e(s),"onerror"===t&&i({utterances:h,lastUtterance:l,error:s}),"onend"===t&&o&&n({utterances:h,lastUtterance:l})}})),h.push(l),speechSynthesis.speak(l)}))}))}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}],n&&l(e.prototype,n),i&&l(e,i),t}();const c=u;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,v(i.key),i)}}function d(t,e){y(t,e),e.add(t)}function v(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:String(e)}function f(t,e,n){y(t,e),e.set(t,n)}function y(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function b(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,w(t,e,"set"),n),n}function w(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var S=new WeakMap,_=new WeakMap,T=new WeakMap,k=new WeakMap,x=new WeakMap,O=new WeakMap,j=new WeakMap,A=new WeakSet,B=new WeakSet,E=new WeakSet,P=function(){function t(e,n,i,s){var o,r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,E),d(this,B),d(this,A),f(this,S,{writable:!0,value:""}),f(this,_,{writable:!0,value:{}}),o=this,a=[],(r=v(r="voices"))in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,f(this,T,{writable:!0,value:""}),f(this,k,{writable:!0,value:""}),f(this,x,{writable:!0,value:""}),f(this,O,{writable:!0,value:""}),f(this,j,{writable:!0,value:[]}),b(this,_,e),this.voices=n,b(this,x,i),b(this,O,s),m(this,A,L).call(this),this.defineVoiceAndLang(s,i)}var e,n,i;return e=t,n=[{key:"isAndroid",value:function(){var t=navigator.userAgent.toLowerCase().indexOf("android")>-1;return!!t}},{key:"getBrowser",value:function(){return g(this,S)}},{key:"getLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(this,T),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(this,k);return g(this,k)===e||this.defineVoiceAndLang(t,e),g(this,k)}},{key:"getVoice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(this,T),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(this,k);return g(this,T)===t||this.defineVoiceAndLang(t,e),g(this,T)}},{key:"setLanguage",value:function(t,e){var n=this,i=!1;return this.voices.length?(Object.values(this.voices).map((function(e){var s=new RegExp(t,"gi");null!==e.lang.match(s)&&e.name&&(b(n,k,e.lang),i=!0)})),{lang:g(this,k),isSupported:i}):{lang:g(this,k),isSupported:i}}},{key:"setVoice",value:function(t){b(this,T,t)}},{key:"getVoiceByLangCode",value:function(t){for(var e=0;e<this.voices.length;e++){var n=this.voices[e];if(n.lang===t)return n.name}return!1}},{key:"defineVoiceAndLang",value:function(t,e){var n,i="",s=t||g(this,O),o=e||g(this,x),r=m(this,B,C).call(this,o),a=m(this,E,z).call(this,r);if(a.length>1)for(var l=0;l<a.length;l++){if(i=a[l].lang,n=a[l].name,s===a[l].name){b(this,T,n),b(this,k,i);break}b(this,T,n),b(this,k,i)}else 1===a.length?(b(this,T,a[0].name),b(this,k,a[0].lang)):(b(this,T,t),b(this,k,e))}},{key:"getVoices",value:function(){return this.voices}},{key:"validateCountryCode",value:function(t){for(var e=this.voices,n=0;n<e.length;n++){var i=e[n].lang;if((i=m(this,B,C).call(this,i))==t||this.aliasCountryCode(t))return!0}return!1}},{key:"aliasCountryCode",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={es:["es","ca"]};for(var i in n)if(n[i].includes(t))return!!e||i;return!e&&t}}],n&&p(e.prototype,n),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(){var t=this,e=g(this,_).browser;Object.keys(e).map((function(n){e[n]&&b(t,S,n.replace("is_",""))}))}function C(t){return t&&null!=t.indexOf("-")?t.split("-")[0]:t&&null!=t.indexOf("_")?t.split("_")[0]:t}function z(t){var e=this;return b(this,j,[]),Object.values(this.voices).map((function(n){var i=new RegExp(t,"gi");null!==n.lang.match(i)&&n.name&&g(e,j).push(n)})),g(this,j)}window.BrowserSupport=P;var M,N=n(708);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,F(i.key),i)}}function I(t,e,n){return(e=F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R(e)?e:String(e)}var D=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.TTS;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,"TTS",window.TTS),I(this,"browser",null),I(this,"speech",null),I(this,"speechSynthesis",window.speechSynthesis),I(this,"utterence",new SpeechSynthesisUtterance),I(this,"speechRecognitionIsActive",!0),I(this,"speechRecognition",window.speechRecognition||window.webkitSpeechRecognition),I(this,"recordStatus","record"),I(this,"listenStatus","listen"),I(this,"noticeClass","tta_notice"),I(this,"cofiguration",{}),I(this,"timer",null),I(this,"buttonId",null),I(this,"speakButton",null),I(this,"content",null),I(this,"ttsListeningSettings",null),I(this,"languages",[]),I(this,"voices",{}),I(this,"voice","Google UK English Female"),I(this,"language","en-US"),I(this,"buttonTextArr",null),I(this,"splittedSentances",""),I(this,"isCanceled",!1),I(this,"shouldCancelTimer",null),I(this,"callBackAfterEnd",null),I(this,"splitSentences",null),I(this,"playButtonNo",1),this.TTS=o,this.content=i||window.TTS.contents[e],this.splittedSentances=(0,N.jR)(i),this.buttonId=e,this.buttonTextArr=this.TTS.settings.textArr,this.speakButton=s||document.getElementById(e),this.ttsListeningSettings=this.TTS.settings.listening,this.ttsListeningSettings=this.TTS.settings.listening,this.speech=new c,this.splitSentences=N.jR,this.playButtonNo=null==this||null===(n=this.TTS)||void 0===n||null===(n=n.settings)||void 0===n||null===(n=n.settings)||void 0===n||null===(n=n.customize)||void 0===n||null===(n=n.buttonSettings)||void 0===n?void 0:n.id}var e,n,i;return e=t,n=[{key:"getData",value:function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(window.TextToSpeech=this),this}},{key:"playButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.listen_text)&&void 0!==t?t:"Listen"}},{key:"playButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-play"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.play){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.play,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.playButtonText()+"</span></span></div>"}},{key:"replayButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.replay_text)&&void 0!==t?t:"Replay"}},{key:"replayButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-image-rotate"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.replay){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.replay,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.replayButtonText()+"<span></span></span></div>"}},{key:"pauseButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.pause_text)&&void 0!==t?t:"Pause"}},{key:"pauseButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-pause"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.pause){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.pause,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.pauseButtonText()+"<span></span></span></div>"}},{key:"resumeButtonText",value:function(){var t,e;return null!==(t=null==this||null===(e=this.buttonTextArr)||void 0===e?void 0:e.resume_text)&&void 0!==t?t:"Resume"}},{key:"resumeButtonContent",value:function(){var t,e='<div class="tts_button"><span class="dashicons dashicons-controls-play"></span> <span>';if(null!==(t=ttsObj)&&void 0!==t&&null!==(t=t.player_customizations)&&void 0!==t&&null!==(t=t[1])&&void 0!==t&&t.resume){var n,i=(new DOMParser).parseFromString(null===(n=ttsObj)||void 0===n||null===(n=n.player_customizations)||void 0===n||null===(n=n[1])||void 0===n?void 0:n.resume,"image/svg+xml");e='<div className="tts_button">'.concat(i.documentElement.outerHTML,"</div><span>")}return e+" "+this.buttonTextArr.resume_text+"<span></span></span></div>"}},{key:"recordStartButtonContent",value:function(){return'<span class="dashicons dashicons-controls-volumeoff"></span> '+this.buttonTextArr.start_text}},{key:"recordStopButtonConten",value:function(){return'<span class="dashicons dashicons-controls-volumeon"></span> '+this.buttonTextArr.stop_text}},{key:"displayApiMissing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="",i="";if(this.speechRecognitionIsActive||(n+="Text To Audio: Please enable speechRecognition"),this.speechSynthesis||(n+=n?" , speechSynthesis.":"Text To Audio: Please enable speechSynthesis."),t){var s,o=null===(s=document.getElementById(t))||void 0===s?void 0:s.previousSibling;o?(n+=' Click here to <a href="https://wordpress.org/plugins/text-to-audio/#how%20to%20enable%20%60%60speechsynthesis%60%60%20on%20firefox%3F" target="_blank">enable</a>',o.style.display="block",o.innerHTML=n,setTimeout((function(){document.querySelector(".tta_notice").style.display="none",o.innerHTML=""}),5e3)):(n+="\nFollow this link to enable: \n".concat(i+="This browser not supports speechSynthesis API"),alert(n))}else e||"?page=text-to-audio"===location.search&&"#/customize"===location.hash?i+=ttsObj.admin_url+"admin.php?page=text-to-audio#/docs":i+="https://wordpress.org/plugins/text-to-audio/#how%20to%20enable%20%60%60speechsynthesis%60%60%20on%20firefox%3F",n+="\nFollow this link to enable: \n".concat(i),alert(n);return!0}},{key:"displayButtonText",value:function(t){var e;1==(null==this?void 0:this.playButtonNo)&&null!=this&&null!==(e=this.speakButton)&&void 0!==e&&e.innerHTML&&("listen"===t?(this.speakButton.innerHTML=this.replayButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.replayButtonText())):"pause"===t?(this.speakButton.innerHTML=this.pauseButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.pauseButtonText())):"resume"===t&&(this.speakButton.innerHTML=this.resumeButtonContent(),this.speakButton.setAttribute("title","Text To Audio : "+this.resumeButtonText())))}},{key:"finishedSpeaking",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.speech.speaking()&&!n||(console.log("End utterance "+this.speech.speaking()),this.listenStatus="listen",this.displayButtonText(this.listenStatus),this.splittedSentances=(0,N.jR)(window.TTS.contents[this.buttonId]),t.cancel()),console.log("Success !",e),this.callBackAfterEnd&&this.callBackAfterEnd(),this.browser.isAndroid()||(clearTimeout(this.timer),this.timer=null,clearTimeout(this.shouldCancelTimer),this.shouldCancelTimer=null),window.sessionStorage.setItem("tts_paused_by_intention",!1)}},{key:"speak",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content;this.speech.hasBrowserSupport()?(t.setLanguage(this.browser.getLanguage()),t.setVoice(this.browser.getVoice()),t.speak({text:n,queue:!1,listeners:{onstart:function(t){console.log("Start utterance"),e.utterence=t,wp.hooks.doAction("tts_high_light_text",t.currentTarget.text,e.buttonId,N.jR)},onend:function(t){console.log("End utterance")},onpause:function(t){console.log("Pause utterance")},onresume:function(t){console.log("Resume utterance")},onboundary:function(t){}}}).then((function(n){e.finishedSpeaking(t,n)})).catch((function(t){console.error("An error occurred :",t)})),this.listenStatus="pause",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||(this.timer=setTimeout((function e(){t.pause(),console.log(t),setTimeout((function(){t.resume()}),0),this.timer=setTimeout(e,1e4),t.speaking()||(clearTimeout(this.timer),this.timer=null)}),1e4))):this.displayApiMissing("tts__listent_content_"+this.buttonId)}},{key:"pause",value:function(t){var e,n=this;this.browser.isAndroid()?(t.cancel(),this.isCanceled=!0):(t.pause(),this.shouldCancelTimer=setInterval((function(){t.cancel(),n.isCanceled=!0}),1));var i=this.splittedSentances.indexOf((null===(e=this.utterence)||void 0===e||null===(e=e.target)||void 0===e?void 0:e.text)||"");this.splittedSentances=this.splittedSentances.slice(i),this.content=this.splittedSentances.join(" "),this.listenStatus="resume",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||clearTimeout(this.timer)}},{key:"resume",value:function(t){this.isCanceled?(this.speak(t,this.content),clearTimeout(this.shouldCancelTimer),this.browser.isAndroid()||clearTimeout(this.timer)):(t.resume(),clearTimeout(this.shouldCancelTimer)),this.listenStatus="pause",this.displayButtonText(this.listenStatus),this.browser.isAndroid()||(this.timer=setTimeout((function e(){t.pause(),console.log(t),setTimeout((function(){t.resume()}),0),this.timer=setTimeout(e,1e4),t.speaking()||(clearTimeout(this.timer),this.timer=null)}),1e4))}},{key:"_init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.callBackAfterEnd=e,void 0!==this.ttsListeningSettings&&this.speech.init({volume:this.ttsListeningSettings.tta__listening_volume?this.ttsListeningSettings.tta__listening_volume:1,rate:this.ttsListeningSettings.tta__listening_rate?this.ttsListeningSettings.tta__listening_rate:1,pitch:this.ttsListeningSettings.tta__listening_pitch?this.ttsListeningSettings.tta__listening_pitch:2,splitSentences:!0,listeners:{onvoiceschanged:function(t){}}}).then((function(e){t.voices=e.voices,t.browser=new P(ttsObj,e.voices,t.ttsListeningSettings.tta__listening_lang,t.ttsListeningSettings.tta__listening_voice),t._prepareSpeakButton(t.speech),window.sessionStorage.setItem("tts_paused_by_intention",!1)})).catch((function(t){console.error("An error occured while initializing : ",t)}))}},{key:"_prepareSpeakButton",value:function(t){var e=this;"listen"==this.listenStatus?this.speak(t):"pause"==this.listenStatus?this.pause(t):"resume"==this.listenStatus&&this.resume(t),document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState&&"pause"===e.listenStatus&&(e.pause(t),e.callBackAfterEnd&&e.callBackAfterEnd()),"visible"===document.visibilityState&&"resume"===e.listenStatus){var n,i,s=JSON.parse(window.sessionStorage.getItem("tts_paused_by_intention")),o=null!==(n=null===(i=window)||void 0===i||null===(i=i.TTS)||void 0===i||null===(i=i.settings)||void 0===i||null===(i=i.settings)||void 0===i||null===(i=i.settings)||void 0===i?void 0:i.tta__settings_stop_auto_playing_after_switching_tab)&&void 0!==n&&n;s||o||(window.sessionStorage.setItem("tts_paused_by_intention",!1),e.resume(t)),e.callBackAfterEnd&&e.callBackAfterEnd()}}))}}],n&&V(e.prototype,n),i&&V(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();if(null!==(M=window)&&void 0!==M&&null!==(M=M.ttsObj)&&void 0!==M&&M.is_pro_active?window.TextToSpeech=D:window.document.addEventListener("DOMContentLoaded",(function(){window.TextToSpeech=D})),"page=text-to-audio"===new URLSearchParams("page=text-to-audio").toString()){var H;H=setInterval((function(){window.hasOwnProperty("ttsObj")&&ttsObj.is_dashboard&&(window.hasOwnProperty("TTS")?""!==window.TTS.contents[0]&&(window.TTS.contents[1]=""):(window.TTS={},window.TTS.contents={},window.TTS.contents[1]=""),window.TTS.hasOwnProperty("settings")||(window.TTS.settings={listening:{tta__listening_lang:"en-US",tta__listening_voice:"Google UK English Female",tta__listening_pitch:"1",tta__listening_rate:"1",tta__listening_volume:"1"},cssClass:"",btnStyle:"background-color:#ee6d6d;color:#ffffff;width:100%;border:0;display:block;border-radius:4px;text-decoration:none;cursor:pointer;",textArr:{listen_text:"Listen",pause_text:"Pause",resume_text:"Resume",replay_text:"Replay",start_text:"Start",stop_text:"Start"},customCSS:"",shouldDisplayIcon:"inline-block"},window.TTS.settings.readingTime=1),clearInterval(H),H=null)}),1e3)}},708:(t,e,n)=>{n.d(e,{Vh:()=>o,jR:()=>s});var i=function(t){return function(t){return"string"==typeof t||t instanceof String}(t)?t.trim():""},s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map((function(t){return i(t)})).filter(Boolean)},o=function(t,e,n){var i,s,o,r=null!==(i=null===(s=window)||void 0===s||null===(s=s.ttsObj)||void 0===s||null===(s=s.buttonTextArr)||void 0===s?void 0:s.listen_text)&&void 0!==i?i:"Listen";if(null!==(o=window)&&void 0!==o&&null!==(o=o.ttsObj)&&void 0!==o&&null!==(o=o.player_customizations)&&void 0!==o&&null!==(o=o[1])&&void 0!==o&&o.play){var a,l=(new DOMParser).parseFromString(null===(a=ttsObj)||void 0===a||null===(a=a.player_customizations)||void 0===a||null===(a=a[1])||void 0===a?void 0:a.play,"image/svg+xml");return'<button id="tts__listent_content_'.concat(t,'" class="tts__listent_content  ').concat(e,'" type="button" title="Text To Audio:  Tap to listen post."><div className="tts_button">').concat(l.documentElement.outerHTML,"</div> <span>")+" "+r+"<span></span></span></div>"}return'<button id="tts__listent_content_'.concat(t,'" class="tts__listent_content  ').concat(e,'" type="button" title="Text To Audio:  Tap to listen post."><div class="tts_button"><span class="dashicons dashicons-controls-play"></span><span>').concat(r,"<span></div> </button>")}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(882),e=n(708);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function a(t){var e=h();return function(){var n,s=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,n)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,t)},u(t)}function c(t,e,n){return c=h()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var s=new(Function.bind.apply(t,i));return n&&p(s,n.prototype),s},c.apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function v(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function f(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:String(e)}var g=new WeakSet,m=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(h,n);var i,o,u,c=a(h);function h(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),v(l(i=c.call(this)),g),f(l(i),"speech",null),f(l(i),"isProLicenseActive",!1),console.log({tts:window.TTS}),i.isProLicenseActive=null===(n=window)||void 0===n||null===(n=n.ttsObj)||void 0===n?void 0:n.is_pro_license_active;var o=i.attachShadow({mode:"open"});if(window.hasOwnProperty("TTS")){var r=window.TTS.contents,a=window.TTS.settings,u=Object.keys(r);console.log({buttonIds:u});for(var p=function(){var n=y[d];if(n==i.getAttribute("data-id")){var u=document.createElement("div");u.setAttribute("class","wrapper"),u.innerHTML=(0,e.Vh)(n,a.cssClass,i.isProLicenseActive),i.addEventListener("click",(function(e){var i=s(u.children)[0];if(null!=this.speech&&"listen"==this.speech.listenStatus&&(this.speech=null),null===this.speech){var o=new t.Z(n,r[n],i,window.TTS);o._init(),this.speech=o.getData(),this.speech.callBackAfterEnd=this.callBackAfterEnd}else this.speech=this.speech.getData(),"pause"==this.speech.listenStatus?(this.speech.pause(this.speech.speech),window.sessionStorage.setItem("tts_paused_by_intention",!0)):"resume"==this.speech.listenStatus&&this.speech.resume(this.speech.speech)}));var c=document.createElement("style");return c.textContent="\n                        #tts__listent_content_".concat(n,".tts__listent_content{ ").concat(a.btnStyle,"height:30px; }\n                        #tts__listent_content_").concat(n,".tts__listent_content:hover{ ").concat(a.btnStyle,"height:30px; }\n                        // #tts__listent_content_").concat(n,".tts__listent_content .text-position{ position: absolute;padding-top: 2px; }\n                        // #tts__listent_content_").concat(n,".tts__listent_content .dashicons{ display:").concat(a.shouldDisplayIcon,";line-height:1;font-size:25px;height:25px;width:25px; }\n                        \n                        #tts__listent_content_").concat(n,".tts__listent_content svg{ display:").concat(a.shouldDisplayIcon,"; padding-right:7px !important; }\n                        #tts__listent_content_").concat(n,".tts__listent_content:hover  svg{ display:").concat(a.shouldDisplayIcon,"; padding-right:7px !important; }\n                        \n                        ").concat(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(l(i),g,b).call(l(i),a.customCSS),"\n                    "),o.appendChild(c),o.appendChild(u),1}},d=0,y=u;d<y.length&&!p();d++);}return i}return i=h,(o=[{key:"callBackAfterEnd",value:function(){"listen"===this.listenStatus&&this.displayButtonText()}}])&&r(i.prototype,o),u&&r(i,u),Object.defineProperty(i,"prototype",{writable:!1}),h}(u(HTMLElement));function b(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value}document.addEventListener("DOMContentLoaded",(function(){customElements.get("tts-play-button")?console.log({foundcustomElements:customElements.get("tts-play-button")}):customElements.define("tts-play-button",m)}))})()})();